<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Co-signed notarization | Notarization of documents on NEM blockchain</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Co-signed notarization" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Background" />
<meta property="og:description" content="Background" />
<link rel="canonical" href="http://localhost:4000/en/lessons/co-signed-notarization/" />
<meta property="og:url" content="http://localhost:4000/en/lessons/co-signed-notarization/" />
<meta property="og:site_name" content="Notarization of documents on NEM blockchain" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-03-11T15:24:30+08:00" />
<script type="application/ld+json">
{"headline":"Co-signed notarization","dateModified":"2019-03-11T15:24:30+08:00","description":"Background","datePublished":"2019-03-11T15:24:30+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/en/lessons/co-signed-notarization/"},"@type":"BlogPosting","url":"http://localhost:4000/en/lessons/co-signed-notarization/","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/en/assets/main.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/en/feed.xml" title="Notarization of documents on NEM blockchain" /></head>
<body><header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/en/"><span><img src="/en/assets/logo-nem.svg"/></span> workshop.cn</a><nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger" />
            <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
            </label>

            <div class="trigger">
                <div class="changeLanguage">
                <select onchange="changeLanguage('/lessons/co-signed-notarization/')" id="languageType">
                  <option value ="language" disabled selected>Language</option>
                  <option value ="en">English</option>
                  <option value ="ch">中文</option>
                </select>
              </div>
                <i class="fab fa-github"></i> <a class="page-link" href="/edit/master/_lessons/09-cosigned-notarization.markdown"> Edit on GitHub</a>
            </div>
        </nav></div>
</header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="row">

    <div class="sidebar-wrapper col-3">
        <ol><li>
                <a href="/en/lessons/introduction/">
                    Introduction
                </a>
            </li><li>
                <a href="/en/lessons/public-and-private-blockchain/">
                    Public and private blockchains
                </a>
            </li><li>
                <a href="/en/lessons/prepare-your-workstation/">
                    Prepare your workstation
                </a>
            </li><li>
                <a href="/en/lessons/first-notarization/">
                    Your first notarization
                </a>
            </li><li>
                <a href="/en/lessons/content-and-ownership-verification/">
                    Content and ownership verification
                </a>
            </li><li>
                <a href="/en/lessons/confidential-notarization/">
                    Confidential notarization
                </a>
            </li><li>
                <a href="/en/lessons/recipient/">
                    Choosing the transaction recipient
                </a>
            </li><li>
                <a href="/en/lessons/notarization-updates/">
                    Enabling notarization updates
                </a>
            </li><li>
                <a href="/en/lessons/co-signed-notarization/">
                    Co-signed notarization
                </a>
            </li><li>
                <a href="/en/lessons/transfer-notarization/">
                    Transfer notarization
                </a>
            </li><li>
                <a href="/en/lessons/delegated-notarization/">
                    Delegated notarization
                </a>
            </li><li>
                <a href="/en/lessons/future-work/">
                    Future Work: Apostille library
                </a>
            </li></ol>

    </div>

    <div class="col-9">
        <article class="lesson h-entry" itemscope itemtype="http://schema.org/BlogPosting">

            <header class="lesson-header">
                <h1 class="lesson-title p-name" itemprop="name headline">Co-signed notarization</h1>
            </header>

            <div class="lesson-content e-content" itemprop="articleBody">
                <h2 id="background">Background</h2>

<p><img src="/en/assets/images/diagram-multisig.png" alt="recipient-strategy-sink" /></p>

<p>Alice and Bob have reached and agreement and formalized it in a digital document. They want to add both signatures and timestamp the document together.</p>

<p>NEM allows the creation of <strong>multisignature accounts</strong>. When you convert an account into <a href="https://nemtech.github.io/concepts/multisig-account.html">multisig</a>, this  cannot announce transactions by itself. It requires other accounts, called cosignatories, to announce the transactions for them.</p>

<p>It is not always necessary to force all cosignatories to cosign the transaction. The contract is set up specifying the minimum number of cosignatories agreement. These properties can be edited afterwards to suit almost all needs.</p>

<p>Some important considerations to keep in mind:</p>

<ul>
  <li>Once you convert an account to a multisig, you can no longer initiate transactions from that account. Only the cosignatories can start transactions for  the multisig account.</li>
  <li>NEM’s current implementation of multisig is <strong>“M-of-N”</strong>, meaning M can be any number equal to or less than N, i.e., 1-of-4, 2-of-2, 4-of-9, 9-of-10 and so on.</li>
  <li>Multisig accounts can have up to 10 cosignatories.</li>
  <li>An account can be cosigner of up to 5 multisig accounts.</li>
  <li>The number of smallest cosignatures to approve transactions and remove cosignatories is <strong>editable</strong>.</li>
  <li>Multisig accounts can have another multisig as a cosigner, up to 3 levels.</li>
</ul>

<p>You will create a <strong>2-of-2 multisig account</strong> that represents the digital asset, with cosignatories Alice an Bob.</p>

<h2 id="solution">Solution</h2>

<p>A notarization is considered to be valid depending on how we agree to read the records. In this case, we will consider that only messages sent from the same notarization account are valid.</p>

<p>1. Open <code class="highlighter-rouge">Create deterministic account</code> tab. Create a new deterministic account for the digital document and sign it with Alice’s private key.</p>

<p>2. Create an account for Bob.</p>

<p>3. Go to <code class="highlighter-rouge">Create Multisig Account</code> tab. Create a multisig account:</p>

<p>We are using a new type of transaction called <a href="https://nemtech.github.io/concepts/aggregate-transaction.html">aggregate transaction</a> to send multisig transactions. You can check the <a href="https://github.com/nemtech/nem2-workshop-document-notarization/blob/v0.1.0/project/src/app/components/createCosignedNotarization/createCosignedNotarization.component.ts#L48">implementation here</a>.</p>

<ul>
  <li><strong>Multisig private key</strong>: notarization private key (deterministic).</li>
  <li><strong>Cosignatories to add</strong>: Alice and Bob’s private key.</li>
  <li><strong>Min Approval</strong>: 2, meaning two signatures will be required to announce transactions from this account.</li>
  <li><strong>Min Removal</strong>: 1, meaning only one cosignatory is required to delete the other from the multisig account.</li>
</ul>

<p><img src="/en/assets/images/screenshot-multisig-account.png" alt="screenshot-multisig-account" /></p>

<p>Wait until the transaction gets confirmed.</p>

<p>4. Open <code class="highlighter-rouge">Cosigned Notarization</code> tab and announce the cosigned notarization.</p>

<ul>
  <li><strong>File</strong>: test.txt</li>
  <li><strong>Multisig public key</strong>: notarization public key (deterministic).</li>
  <li><strong>Signer private key</strong>: Alice’s private key.</li>
</ul>

<p>Click <code class="highlighter-rouge">Notarize</code> and wait until you get the message <strong>“Notarization pending to be cosigned with hash A8…E6”</strong>.</p>

<p>5. Bob has to cosign the transaction as well, as we had set <code class="highlighter-rouge">minApproval</code> to 2.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">nem2-cli transaction cosign <span class="nt">--profile</span> bob <span class="nt">--hash</span> A855F0C49B78100AFB733DF53FD6758615132E7DBBF74C7B856E4CBACF0946E6</code></pre></figure>

<p>If everything goes well, the status should have changed to: <strong>“Notarization confirmed with hash A8..E6”</strong>.</p>

<p>6. Go to <code class="highlighter-rouge">Get Notarization</code> tab, and search the transaction hash once confirmed.</p>

            </div>
            <div class="page-navigation">
                
                <a class="prev" href="/en/lessons/notarization-updates/">&laquo; Enabling notarization updates</a>
                
                
                <a class="next" href="/en/lessons/transfer-notarization/">Transfer notarization &raquo;</a>
                
            </div><a class="u-url" href="/en/lessons/co-signed-notarization/" hidden></a>

        </article>
    </div>

</div>
      </div>
    </main><footer class="site-footer h-card">
    <div class="wrapper">
        <div class="footer-col-wrapper row">

            <div class="footer-col col-4">
                <i class="fas fa-code"></i> <a href="https://nemtech.github.io">Developer Center</a>
            </div>

            <div class="footer-col col-4">
                <i class="fab fa-slack"></i> <a  href="https://join.slack.com/t/nem2/shared_invite/enQtMzY4MDc2NTg0ODgyLTFhZjgxM2NhYTQ1MTY1Mjk0ZDE2ZTJlYzUxYWYxYmJlYjAyY2EwNGM5NzgxMjM4MGEzMDc5ZDIwYTgzZjgyODM">General Discussion</a>
            </div>

            <div class="footer-col col-4">
                <i class="fab fa-stack-overflow"></i><a  href="https://stackoverflow.com/tags/nem/"> Development questions</a>
            </div>
        </div>

    </div>
</footer>
<script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
<script type="text/javascript" src="/en/assets/custom.js"></script></body>

</html>
